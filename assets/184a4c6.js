(window.webpackJsonp=window.webpackJsonp||[]).push([[33,8,9],{473:function(t,e,n){"use strict";n.r(e);var r=n(543),l=n(447),o={props:["headers","repayments","loading","search","dense","dark","amount","ttInterest","ttBalance"]},c=n(22),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.repayments,"items-per-page":15,search:t.search,dense:t.dense,dark:t.dark,"multi-sort":"",loading:t.loading,"loading-text":"Loading... Please wait"},scopedSlots:t._u([{key:"top",fn:function(){return[e(l.a,{attrs:{"no-gutters":""}},[e("h3",{staticClass:"font-weight-black"},[t._v("Repayment schedule")])])]},proxy:!0},t.$vuetify.breakpoint.smAndUp?{key:"body.append",fn:function(){return[e("tr",{staticClass:"table_footer"},[e("td",[t._v("Total#")]),t._v(" "),e("td"),t._v(" "),e("td",[e("p",{staticClass:"font-weight-black"},[t._v(t._s(t.amount))])]),t._v(" "),e("td"),t._v(" "),e("td",[e("p",{staticClass:"font-weight-black"},[t._v(t._s(t.ttInterest))])]),t._v(" "),e("td"),t._v(" "),e("td",[e("p",{staticClass:"font-weight-black"},[t._v(t._s(t.ttBalance))])])])]},proxy:!0}:null],null,!0)})}),[],!1,null,null,null);e.default=component.exports},493:function(t,e,n){"use strict";n.r(e);var r=n(448),l=n(76),o=n(90),c=n(68),d=n(25),h=n(63),m={props:{title:String,subtitle:String},data:function(){return{}}},_=n(22),component=Object(_.a)(m,(function(){var t=this,e=t._self._c;return e(r.a,{attrs:{cols:"12",sm:"4"}},[e(o.a,{attrs:{dense:""}},[e(c.a,{staticClass:"ma-0"},[e(h.a,[e(l.a,[t._v("mdi-square-medium")])],1),t._v(" "),e(d.a,[e(d.c,[t._v(t._s(t.title))]),t._v(" "),e(d.b,{staticClass:"font-weight-light"},[t._v(t._s(t.subtitle))])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},564:function(t,e,n){"use strict";n.r(e);var r=n(445),l=n(509),o=n(433),c=n(460),d=n(459),h=n(446),m=n(475),_=n(457),v=n(76),f=n(447),y=n(451),w=n(1),I=n.n(w),k=n(54),x=n(493),O=n(473);function C(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function S(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?C(Object(source),!0).forEach((function(e){I()(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):C(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j={components:{ListItem:x.default,DatatableComponent:O.default},data:function(){return{data:!0,dialog:!1,table:!1,repayments:[],loading:!1,search:"",searchUsers:null,username:"",valid:!0,title:"Home",dense:!0,dark:!1,advanced:!1,method:{},ttInterest:"",ttBalance:"",amount:null,datarequired:!0,headers:[{text:"Day",align:"left",sortable:!1,value:"days"},{text:"Paid Date",value:"paiddate"},{text:"Principal",value:"loanamount"},{text:"Principal due",value:"principaldue"},{text:"Interest",value:"interest",filterable:!1},{text:"Loan Balance",value:"loanbalance"},{text:"Total",value:"total",filterable:!1}]}},created:function(){},methods:{calculateRepaymentSchedule:function(){var t=this;this.data=!1,this.table=!0;var data=this.schedule;this.datarequired=!1,this.amount=data.amount,this.loading=!0,this.$nextTick((function(){var e=[],n=(t.getMethodById(data.interest_method),data.interest_rate/100),r=parseInt(data.amount)*n*parseInt(data.loan_term);t.ttInterest=r,t.ttBalance=parseInt(data.amount)+parseInt(r);for(var l=parseInt(data.amount)+parseInt(r),i=0;i<data.number_of_repayments;i++){var o=new Object;o.days=1+i,o.paiddate=t.getNextWeekDay((i+1)*parseInt(t.getTermsValue(data.repaid_every_unit))*parseInt(data.repaid_every)).toLocaleString().split(" ")[0],o.principaldue=data.amount/data.number_of_repayments,o.loanamount=data.amount,o.interest=r/data.number_of_repayments,o.total=o.principaldue+o.interest,l-=o.principaldue+o.interest,o.loanbalance=l,e.push(o)}t.repayments=e})),this.loading=!1},getNextWeekDay:function(i){var t=new Date(Date.now());return new Date(t.getTime()+1*parseInt(i)*24*60*60*1e3)},getTermsValue:function(t){switch(t){case"D":return 1;case"W":return 7;case"M":return 30;case"Y":return 366}},getMethodById:function(t){switch(t){case"FLAT":return 1;case"STRAIGHT":return 2;case"REDUCING_BALANCE":return 3}},shareSchedule:function(){this.dialog=!1;var t=this.username,e=this.schedule,n=this.$store.getters.getResults.filter((function(e){return(null==e?void 0:e.username)===t}))[0];this.$store.dispatch("shareSchedule",{scheduleId:null==e?void 0:e.id,shareTo:null==n?void 0:n.username}),this.username=""}},watch:{searchUsers:function(t){this.$store.dispatch("_searchUsers",t)}},computed:S(S({},Object(k.b)({uLoading:"getUsersLoading"})),{},{schedule:function(){return this.$store.getters.getterschedule(parseInt(this.$nuxt._route.params.id))[0]},users:function(){return this.$store.getters.getResults.map((function(t){return null==t?void 0:t.username}))}})},D=n(22),component=Object(D.a)(j,(function(){var t=this,e=t._self._c;return e(r.a,{staticClass:"app"},[e(h.a,{attrs:{fluid:""}},[e(c.a,{attrs:{flat:"",outlined:""}},[e(d.d,[e("span",[t._v(t._s(t.schedule.name))]),t._v(" "),e(y.a),t._v(" "),t.data?e(v.a,{attrs:{color:"info lighten-1"},on:{click:function(e){t.data=!t.data}}},[t._v("mdi-chevron-up-box")]):t._e(),t._v(" "),t.data?t._e():e(v.a,{attrs:{color:"info lighten-1"},on:{click:function(e){t.data=!t.data}}},[t._v("mdi-chevron-down-box")])],1),t._v(" "),e(d.b,{staticClass:"title font-weight-light"},[t._v("Selected Repayment Schedule "+t._s(t.schedule.name))]),t._v(" "),e(d.c),t._v(" "),t.data?e(f.a,[e("list-item",{attrs:{title:"Name",subtitle:t.schedule.name+" { ID:"+[t.schedule.id]+" }"}}),t._v(" "),e("list-item",{attrs:{title:"Amount",subtitle:t.schedule.amount}}),t._v(" "),e("list-item",{attrs:{title:"Interest Rate",subtitle:t.schedule.interest_rate}}),t._v(" "),e("list-item",{attrs:{title:"Interest Method",subtitle:t.schedule.interest_method}}),t._v(" "),e("list-item",{attrs:{title:"Loan term",subtitle:t.schedule.loan_term+t.schedule.loan_term_unit}}),t._v(" "),e("list-item",{attrs:{title:"Repaid Every",subtitle:t.schedule.repaid_every+t.schedule.repaid_every_unit}}),t._v(" "),e("list-item",{attrs:{title:"Number of Repayments",subtitle:t.schedule.number_of_repayments}}),t._v(" "),e("list-item",{attrs:{title:"Amortization",subtitle:t.schedule.amortization}}),t._v(" "),e("list-item",{attrs:{title:"Interest Moratorium",subtitle:t.schedule.interest_moratorium}}),t._v(" "),e("list-item",{attrs:{title:"Principal Moratorium",subtitle:t.schedule.principal_moratorium}}),t._v(" "),e("list-item",{attrs:{title:"Interest Free period",subtitle:t.schedule.interest_free_period}}),t._v(" "),t.schedule.is_shared?[e("list-item",{attrs:{title:"Shared By",subtitle:t.schedule.shared_by.username}})]:t._e()],2):t._e(),t._v(" "),t.table?e(h.a,{attrs:{fluid:""}},[e("datatable-component",{staticClass:"elevation-0 font-weight-light",attrs:{headers:t.headers,repayments:t.repayments,"items-per-page":5,search:t.search,dense:t.dense,dark:t.dark,ttInterest:t.ttInterest,ttBalance:t.ttBalance,amount:t.amount,"multi-sort":"",loading:t.loading,"loading-text":"Loading... Please wait"}})],1):t._e(),t._v(" "),e(d.a,[t.table?e(o.a,{staticClass:"info lighten-1 font-weight-light",on:{click:function(e){t.dialog=!0}}},[t._v("Share")]):e(o.a,{staticClass:"info lighten-1 font-weight-light",staticStyle:{"text-transform":"capitalize"},attrs:{depressed:""},on:{click:t.calculateRepaymentSchedule}},[t._v("Calculate")])],1)],1),t._v(" "),e(m.a,{attrs:{width:"70rem"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(c.a,[e(d.c,[t._v("Share repayment schedule")]),t._v(" "),e(_.a,{staticClass:"mx-5"},[e(l.a,{attrs:{outlined:"",placeholder:"Username",loading:t.uLoading,"search-input":t.searchUsers,items:t.users,"hide-no-data":""},on:{"update:searchInput":function(e){t.searchUsers=e},"update:search-input":function(e){t.searchUsers=e}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),t._v(" "),e(o.a,{staticClass:"primary",on:{click:t.shareSchedule}},[t._v("Share schedule")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);